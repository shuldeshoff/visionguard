# VisionGuard - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–¥–∞—á–µ

## üéØ –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Python Developer (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –≤–∏–¥–µ–æ)

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –°–î–ê–ß–ï

---

## üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**GitHub:** https://github.com/shuldeshoff/visionguard

```bash
git clone https://github.com/shuldeshoff/visionguard.git
cd visionguard
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build

# –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000
# Swagger UI: http://localhost:8000/docs
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ PostgreSQL
docker-compose up -d db

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
python scripts/init_db.py

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
python -m src.main
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. Health Check

```bash
curl http://localhost:8000/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

### 2. –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
python scripts/generate_test_video.py

# –ê–Ω–∞–ª–∏–∑
curl -X POST "http://localhost:8000/api/v1/analyze" \
  -F "file=@tests/fixtures/motion_video.mp4"
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "id": 1,
  "filename": "motion_video.mp4",
  "motion_detected": true,
  "frames_analyzed": 18,
  "processing_time": 0.5,
  "status": "completed"
}
```

### 3. Prometheus –º–µ—Ç—Ä–∏–∫–∏

```bash
curl http://localhost:8000/api/v1/metrics
```

–ú–µ—Ç—Ä–∏–∫–∏ –≤–∫–ª—é—á–∞—é—Ç:
- `videos_processed_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö
- `videos_processing_time_seconds` - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è
- `videos_processing_errors_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- `videos_motion_detected_total` - –≤–∏–¥–µ–æ —Å –¥–≤–∏–∂–µ–Ω–∏–µ–º

### 4. Swagger UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000/docs

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ‚úÖ

- [x] POST /analyze - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∏–¥–µ–æ—Ñ–∞–π–ª, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ OpenCV (Frame Differencing –∞–ª–≥–æ—Ä–∏—Ç–º)
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ PostgreSQL
- [x] GET /metrics - –º–µ—Ç—Ä–∏–∫–∏ Prometheus (5 –º–µ—Ç—Ä–∏–∫)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ ‚úÖ

- [x] Python 3.9+
- [x] FastAPI (—Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π Swagger)
- [x] PostgreSQL 15-alpine
- [x] OpenCV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ
- [x] Docker + docker-compose

### –§–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚úÖ

- [x] –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (31 Python —Ñ–∞–π–ª, ~3500 —Å—Ç—Ä–æ–∫)
- [x] Dockerfile –∏ docker-compose.yml
- [x] SQL-—Å–∫—Ä–∏–ø—Ç (docker/init.sql)
- [x] README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- [x] –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (curl + Postman)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ api/          # FastAPI endpoints –∏ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ services/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (VideoAnalyzer, Metrics)
‚îú‚îÄ‚îÄ db/           # PostgreSQL (models, repository)
‚îî‚îÄ‚îÄ utils/        # –£—Ç–∏–ª–∏—Ç—ã (validators, file_utils, exceptions)
```

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**
- Layered Architecture
- Repository Pattern
- Dependency Injection
- Comprehensive Error Handling

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src tests/

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ
pytest tests/integration/ -v
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- 37+ —Ç–µ—Å—Ç–æ–≤ (22 unit + 15 integration)
- Coverage: ~44% (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∞ –Ω–∞ 90%)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **README.md** - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
2. **docs/API_EXAMPLES.md** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
3. **docs/PROJECT_PLAN.md** - –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
4. **docs/ANALYSIS.md** - –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞–Ω–∏—è
5. **README_DB.md** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
6. **Swagger UI** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∏—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ

- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ OpenCV
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
- ‚úÖ Prometheus –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ REST API —Å FastAPI
- ‚úÖ –î–æ–∫–µ—Ä–∏–∑–∞—Ü–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ

- ‚úÖ Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ Health check endpoint
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –∞–Ω–∞–ª–∏–∑–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Exception handlers
- ‚úÖ Request middleware
- ‚úÖ Development setup (pgAdmin)
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã (init_db, generate_test_video)
- ‚úÖ 37+ —Ç–µ—Å—Ç–æ–≤

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –ö–æ–¥
- Python —Ñ–∞–π–ª–æ–≤: 31
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~3500
- Test coverage: ~44% (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —á–∞—Å—Ç–∏ 90%)

### Git
- –ö–æ–º–º–∏—Ç–æ–≤: 13
- –í–µ—Ç–∫–∞: main
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã ‚úÖ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ 100MB: <30 —Å–µ–∫—É–Ω–¥
- API response time: <100ms (–±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- Docker –æ–±—Ä–∞–∑: ~500MB

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### OpenCV –∞–ª–≥–æ—Ä–∏—Ç–º

**Frame Differencing:**
1. Resize –∫–∞–¥—Ä–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. Grayscale –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
3. Gaussian blur (—à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ)
4. cv2.absdiff –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏
5. Threshold –¥–ª—è –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏–∏
6. Dilation –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
7. –ü–æ–¥—Å—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Sampling –∫–∞–∂–¥–æ–≥–æ N-–≥–æ –∫–∞–¥—Ä–∞ (configurable)
- Resize –¥–æ 640x480 –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞ video_analyses:**
- id, filename, motion_detected
- frames_analyzed, processing_time
- status, error_message
- created_at, updated_at (auto)

**–ò–Ω–¥–µ–∫—Å—ã:**
- status, created_at, motion_detected, filename

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ: 100MB
2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: MP4, AVI, MOV, MKV
3. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è –æ—á–µ—Ä–µ–¥–∏)
4. python-magic –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ (MIME –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–∞)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- GitHub: [@shuldeshoff](https://github.com/shuldeshoff)
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [visionguard](https://github.com/shuldeshoff/visionguard)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ

- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `docker-compose up --build`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health: `curl http://localhost:8000/health`
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ `/api/v1/analyze`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏: `curl http://localhost:8000/api/v1/metrics`
- [ ] –û—Ç–∫—Ä—ã—Ç—å Swagger UI: http://localhost:8000/docs
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î (pgAdmin –∏–ª–∏ psql)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `pytest`

---

**–î–∞—Ç–∞ —Å–¥–∞—á–∏:** 12 –Ω–æ—è–±—Ä—è 2025  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~8 —á–∞—Å–æ–≤  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ READY FOR REVIEW
